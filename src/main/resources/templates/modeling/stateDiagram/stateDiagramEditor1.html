<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <title>System Modeling</title>
    <link rel="stylesheet" href="../../../static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" href="../../../static/css/font-awesome.min.css"
          th:href="@{/css/font-awesome.min.css}">
    <link rel="stylesheet" href="../../../static/css/ace.min.css"
          th:href="@{/css/ace.min.css}">
    <link rel="stylesheet" href="../../../static/css/joint.css"
          th:href="@{/css/joint.css}">
    <link rel="stylesheet" href="../../../static/css/style.css"
          th:href="@{/css/style.css}">
</head>
<body class="no-skin">
<div id="app">
    <!--header部分开始-->
    <div th:replace="common/header::myHeader"></div>
    <!--header部分结束-->
    <!--main-container部分开始-->
    <div class="main-container" id="main-container">
        <!--sidebar部分开始-->
        <div th:replace="common/sidebar::mySidebar"></div>
        <!--sidebar部分结束-->
        <div class="main-content">
            <!--breadcrumbs部分开始-->
            <div class="breadcrumbs" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a th:href="@{/toIndex}">MoSiV-Online</a>
                    </li>
                    <li class="active">System Modeling</li>
                    <li class="active">Behavioural Diagrams</li>
                    <li class="active">State Diagrams</li>
                </ul>
            </div>

            <div style="width: 100%; display: flex;">
                <div id="myDiagram" style="width: 100%; border: solid 1px #000000;"></div>
            </div>
        </div>
        <!--footer部分开始-->
        <div class="footer">
            <div class="footer-inner">
                <div class="footer-content">
                    <span class="bigger-120">
                         &copy; 2021 MoSiV-Online
                    </span>
                </div>
            </div>
        </div>
        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
        </a>
        <!--footer部分结束-->
    </div>
    <!--main-container部分结束-->
</div>
</body>
<script src="../../../static/js/jquery-3.6.0.js" th:src="@{/js/jquery-3.6.0.js}"></script>
<script src="../../../static/js/lodash.js" th:src="@{/js/lodash.js}"></script>
<script src="../../../static/js/backbone.js" th:src="@{/js/backbone.js}"></script>
<script src="../../../static/js/joint.js" th:src="@{/js/joint.js}"></script>
<script src="../../../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
<script src="../../../static/js/ace.min.js" th:src="@{/js/ace.min.js}"></script>
<script src="../../../static/js/ace-extra.min.js" th:src="@{/js/ace-extra.min.js}"></script>
<script src="../../../static/js/vue.min.js" th:src="@{/js/vue.min.js}"></script>
<script>
    $(function () {
        let ul = $('ul.nav-list').children();
        ul.eq(0).removeClass("active");
        ul.eq(1).addClass("active open");
        ul.eq(1).children().eq(2).children().eq(1).addClass("active open");
        ul.eq(1).children().eq(2).children().eq(1).children().eq(2).children().eq(1).addClass("active");

        let graph = new joint.dia.Graph;
        let paper = new joint.dia.Paper({
            el: document.getElementById('myDiagram'),
            model: graph,
            width: 2000,
            height: 700,
            gridSize: 8,        // 图形元素移动步进像素
            drawGrid: true,     // 显示步进点
            background: {       // 画布背景色
                color: 'rgba(255, 255, 255, 0.1)'
            },
            restrictTranslate: true,
        });

        // -------------------自定义建模元素---------------------//
        // 状态图的初始状态
        joint.shapes.standard.Circle.define("mosiv.stateDiagram.StartState", {
            type: 'mosiv.stateDiagram.StartState',
            size: {
                width: 40,
                height: 40,
            },
            attrs: {
                type: 'element',
                body: {
                    'fill': '#34495e',
                    'stroke': '#2c3e50',
                    'stroke-width': 2,
                    'rx': 1,
                },
                label: {
                    fill: '#FFFFFF',
                    text: 'Initial',
                    fontSize: 13,
                }
            }
        });
        // 状态图的结束状态
        joint.shapes.basic.Circle.define("mosiv.stateDiagram.EndState", {

        });
        // 初始状态建模元素
        let startState = new joint.shapes.mosiv.stateDiagram.StartState({
            position: {
                x: 30,
                y: 20,
            },
        });
        // 结束状态建模元素
        let endState = new joint.shapes.mosiv.stateDiagram.EndState({
            position: {
                x: 30,
                y: 80,
            }
        });
        // 状态图的普通状态
        let state = new joint.shapes.uml.State({
            position: {
                x: 10,
                y: 140,
            },
            size: {width: 80, height: 50},
            attrs: {
                '.uml-state-body': {
                    fill: 'rgba(48, 208, 198, 0.2)',
                    stroke: 'rgba(48, 208, 198, 0.5)',
                    'stroke-width': 1.5,
                    'rx': 30, 'ry': 30,
                },
                '.uml-state-separator': {
                    stroke: 'rgba(48, 208, 198, 0.4)'
                }
            }
        });
        startState.addTo(graph);
        endState.addTo(graph);
        state.addTo(graph);
        // 分割线
        let separator = new joint.shapes.standard.Polyline();
        separator.resize(3, 700);
        separator.position(100, 0);
        separator.addTo(graph);


        paper.on({

        });
    });
</script>
</html>